# Traintime PDA / XDYou 支持页面暨问答页面

<p style="text-align:center"><i>最近一次编辑：BenderBlog Rodriguez 2025-06-14</i></p>

本软件反馈群：

 - 反馈1群：902652582（本群可吹水）
 - 反馈2群：912366449（本群不可吹水）
 
开发者联系方式：

 - 邮箱：[superbart_chen@qq.com](mailto:superbart_chen@qq.com)
 - B站账号: [SuperBart](https://space.bilibili.com/284290692)

## 如何获取本软件

如果是正式版软件

 - 如果是苹果系统，请去 App Store 搜索 XDYou 并安装。
 - 如果是安卓系统，请去[本软件官网](README.md)或者本项目的 [Github Release](https://github.com/BenderBlog/traintime_pda/releases) 下载。
 - 如果是桌面端，请去本项目的 [Github Release](https://github.com/BenderBlog/traintime_pda/releases) 下载。
 
如果是测试版软件

 - 如果是苹果系统，请加入 Testflight 测试。链接在此：[https://testflight.apple.com/join/pLKe5B4q](https://testflight.apple.com/join/pLKe5B4q)
 - 如果是安卓系统，请加入本软件反馈群下载构建。
 - 桌面版软件不提供测试版软件，有条件用户可自行编译。
 
所有用户应该使用最新软件，如果使用旧版本软件时候遇到错误，请先更新软件。如果更新时候发生软件无法使用的状况，那您一定用的超级老的版本，请您清空数据或者重新安装吧，抱歉:P
 
## 我遇到了错误，如何向开发者反馈

在反馈前，请准备以下信息：

 - 报错时候您在干什么？
 - 报错的截图，这个下面会具体展开。
 - （如果可以）复现报错过程的手机录屏。
 - 程序的日志，可在设置页面“缓存登录选项”里的“查看网络拦截器和日志”选项获取。

本软件集成了错误汇报系统，当程序产生异常的时候，该系统会捕捉，并在用户同意的情况下通过邮箱方式发送到我的微软邮箱中。该系统相对不人性化，仅汇报报错异常的类型和函数调用信息。我接收到的报错信息基本为 Flutter 框架提供的异常类型和函数调用信息，没有任何关于本程序代码的信息。我在不知道用户干了啥的前提下，这些信息的信息量接近为0。

所以，我希望用户提供报错信息的时候，一定要写明您在遭遇错误的时候您的操作，如果提供录屏更好了。同时，根据我上文提到的报错系统不人性化方面，希望有条件的用户花一点时间看看报错信息的调用函数信息（也就是下面有 #1 这样标号的部分）是否包含 `watermeter` 字符。如果有这个信息，我调错会更加方便。

反馈方式可以通过本软件反馈群，建议发到二群。如果您有 github 账号，在本项目开启 issue 也是个很不错的方式。我接收到信息后会尽快回复您，并根据错误类型尽快发修复版。

最后，本程序是开源软件，如果问题真的不算太大，我鼓励用户自行修复并发起合并请求，我会很感激的。如果您自己修复时候遇到任何问题，我会很热心地帮助您的。

## 登录失败了咋办

如果长期提示为“登录后处理”，用户可以退出程序后重新进入。这是由于本程序在登录后，获取学期信息和宿舍信息的等待时间太长，优化登录逻辑为本程序优化一大方向。

如果没有明确说明错误，大概率为账号密码错误，请用户自行登录电脑一站式（ehall.xidian.edu.cn）处理。请在本程序二次登录前，点击“清除登录缓存”按钮。

如果您确保账号密码无误，同时用手机浏览器访问并登录电脑一站式无虞，请点击“查看登录交互”按钮获取登录过程中的日志，并发送给开发者作为错误报告，详情看本 FAQ 第二节。

最后提醒，本程序针对在学本科生和研究生。如果不是这种用户，遇到问题请不要打扰开发组，并请了解左翼民粹主义。

## 我的日程表桌面小组件咋刷新的？

在主程序刷新课程表信息之后，程序会通知桌面小组件刷新。桌面小组件本身也会自行按照目前时间，刷新当天和明日的课程信息。

对于 iOS 设备，小组件的刷新由定时器控制，理论上在半夜更新今日日程信息和明日日程信息。同时，随着日程结束，经历过的课程应会消失。

对于安卓设备，由于缺乏类似 iOS 的精细时间控制，小部件只能一定程度上保证半夜更新今日日程信息和明日课程信息。同时，当用户切换今日日程信息和明日日程信息时，所有信息都会重新加载并刷新。

## 电费信息获取相关

研究生电费查询账号需要自行输入，因为无法获取宿舍信息。

根据一站式能源窗口工作人员的描述，目前学校能源系统在半夜十二点进行数据更新。这也就是您在网上交电费时候，半夜十一点半左右无法交电费的理由。我针对这个逻辑，在添加了缓存机制的情况下，写了如下电费获取逻辑：

 - 当程序启动的时候，读取电费缓存。
 - 如果没有电费缓存，或者电费缓存不是当日信息的，获取当日电费信息，并进行缓存。
 - 当用户在电费窗口手动要求电费更新时，获取电费信息并无条件缓存之。
 - 如果当日的电费信息尚未加入历史记录，或者当日电费信息因用户缴费等原因和之前记录不一样，加入之。
 - 如果历史记录超过七条，则去掉最老的一条。

根据目前获取结果，如果开三个空调的话，一天40千瓦时的电；如果不开空调的话，一天就是20千瓦时的电。希望通过这个功能，同学可以更好地控制日常用电量。

另请注意，由于电费访问过程不稳定，同时为减少程序不稳定性，暂不实现电费计算、绘图功能和小组件。请用户体谅开发者的苦衷，不要再催了。

## 日程信息获取相关

日程信息包括课程信息、考试信息和物理实验信息。

课程信息和考试信息均通过一站式获取，课程表信息缓存两天，考试信息更新更加频繁。课程信息和考试信息可以强制重新加载，其方式分别为：

 - 课程安排可在日程表窗口点击右上角按钮，之后点击“刷新日程表”；在本程序设置页面也有类似选项。
 - 考试信息可在考试安排页面右上角点击刷新按钮更新。

物理实验信息通过物理实验服务器获取，该服务访问**需要在校园网环境**。如不在校园网环境，则加载缓存。由于全新的物理实验信息成绩页面中，成绩以极低分辨率的图片显示，本程序暂不处理成绩信息。

## 如何导出日程信息？

在日程表页面中，先点击右上角按钮，之后点击任一按钮：

 - 生成日历文件：该选项会将日程信息导出为 iCalendar 格式，即 ics 文件。
 - 导出到系统日历：该选项会将日程信息直接导入系统日历。
 
## 成绩信息获取相关

成绩信息的获取引入了短时缓存机制，尽量在获取信息的准确性和即时性方面取平衡。

 - 当用户第一次进入成绩查询页面时候，加载考试信息，同时写入缓存。
 - 当用户点击成绩查询页面右上角刷新按钮时，考试信息会无条件从学校一站式刷新，并刷新缓存。
 - 当用户半个小时内第二次进入成绩查询页面时候，默认加载缓存信息。
 
在考试信息页面里，点击计算器按钮可以选择科目计算均分，默认选择的逻辑为忽略以下类型科目：

 - 课程名称：军事，形势与政策，创业基础，包含“新生”的课程，写作与沟通，包含“心理”的课程，包含“物理实验”的课程
 - 课程类型：通识教育选修课，集中实践环节，拓展提高，通识教育核心课，专业选修课，公共任选课
 
成绩信息是“未知但及格”表示本科目已经通过，但是未查询到具体成绩信息。在一站式成绩页面中，有一列是否及格，那里是"是"但是成绩那一列没有信息就会显示成为这样。

根据 2024-2025 第一学期和第二学期时候的用户反馈，疑似一站式会在考试期间暂停开放本学期成绩查询。

如果您能搞到全校所有学院的保研课程信息，我会很乐意集成的。

同时，根据用户反馈，微信校务行的成绩单功能无论评教与否都能查询成绩。

## 校园网信息相关

校园网信息分为两个：您自己的校园网账号信息和您目前使用网络的信息。后一种是针对宿舍用路由器的状况。

您自己的校园网账号信息需要输入校园网密码，一般为身份证号后六位。校园网查询系统返回的原始数据，本程序未加处理，故该页面的在线设备信息大概率会出现一个 ip 出现了三次的状况。

另注：截至目前写稿时，学校仅针对娱乐网站，游戏网站进行限流措施，且 Bilibili 和科研数据、SDK 等暂无限流，请用户购买宽带前考虑用途。如果您很需要打游戏或者看肥皂剧，最好还是购买吧。至于电话卡信息，请获取更多来源，货比三家。

## 如何加入 XDU Planet

XDU Planet 是西电同学博客聚集地，目前由西电开源社区非正式维护。本程序主页第二页为该内容。

如果您有博客，且博客支持 RSS 输出，则可以加入 XDU Planet。如需加入，请在[这个文件](https://github.com/xdlinux/planet/blob/deploy/config.yml)下面添加您博客的 RSS 输出地址。

## 如何参与本程序开发？

Traintime PDA / XDYou 是一个大众项目，虽然目前绝大多数代码都是我写的，我很想让各位从各个角度参与进来。目前有以下几个方向适合不懂开发的参与：

 - 英语国际化文件的优化
 - 提出各种合理的想法，并协助我实现
 - 给我程序的三个吉祥物写背景故事
 - 设计页面文件，纸质绘图也可以接受
 - 协助我进行 bug 修复
 - 在符合规定的情况下，提供能够造福大多数同学的东西
 
以下几个方向如果有大佬能帮我，就更好了

 - 优化登录逻辑
 - 编写一GUI页面，方便输入电费账号
 - 主页信息刷新逻辑
 - 优化程序的报错，减少不必要的弹窗
 - 使用合理，合法的方式获取到新的数据接口
 
对于数据接口，本程序原则上不接受任何新的接口。如果提供方可以提供通过浏览器 F12 方式得到的路径，则可以考虑。

目前程序我认证的贡献者有三十个，大多数开发者均属于“不懂开发”的贡献者，背景各异。所以您如果有想法，请直接做吧。对于代码实现方面，PR 一般我都会先 Merge，然后融合的，所以不要有太大的负担。


## 不是西电的同志们如何利用代码？

以下是部分我觉得本程序中有通用价值的部分：

 - /lib/page/classtable是本程序的课程表/日程表组件，您可以拿去用来渲染课表，这个表可以往里面塞考试信息等和课程时间不对应的玩意。
 - 可以修改/lib/repository里面的东西，以用来适配您的学校相关系统。
 - /lib/page/library是简单的图书馆页面，包括借书状况和查询书籍，可以修改一下成为某些课的大作业。
 - /ios/ClasstableWidget是一个 iOS 下面简单的显示日程插件，可以按需使用。数据来源可以参考我是如何把东西存到程序公共空间的。
 - /lib/page/public_widget有一堆不知所以的部件，看情况随便用。

在使用前，请看下文件的授权，以SPDX-License-Identifier开头。如果只有MPL-2.0而且你不方便开源仅对这一个文件的修改的话，和我联系。如果您是想将该软件适配到您学校，在绝大多数的可能范围内我可以给您部分功能代码的闭源许可。但需要注意的是，本人是反对通过学校基本服务来获取利润的，这样的商业化路子长久不了，而且有黑产之嫌。

计划写一个本代码的查看指南，请各位期待。在适配过程中有任何问题，请大胆地和我联系。